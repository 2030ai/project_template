Автоматическая проверка PR с AI-агентами (обязательно)

**Правило:** После создания или обновления PR необходимо запустить автоматическую проверку кода с помощью Codex и Copilot.

**Процесс:**

1. **Запустить проверку Codex:**
   ```bash
   # Добавить комментарий к PR
   gh pr comment <PR_NUMBER> --body "@codex проверь"
   ```

2. **Подождать 5 минут** для завершения анализа:
   ```bash
   # Использовать sleep для ожидания
   sleep 300
   ```

3. **Проверить комментарии от AI-агентов:**
   ```bash
   # Получить комментарии от Copilot и Codex
   gh api repos/2030ai/2030aiwebsite/pulls/<PR_NUMBER>/comments \
     --jq '.[] | select(.user.login | test("copilot|codex")) | "[\(.user.login)] \(.body)"'
   ```

4. **Оценить замечания:**
   - Внимательно изучить каждое замечание от AI-агентов
   - Определить, требует ли оно реального исправления (AI-агенты могут давать ложноположительные замечания)
   - Если замечание обосновано и указывает на реальную проблему — исправить код
   - Запушить исправления
   - Снова добавить комментарий `@codex проверь`

5. **Повторять шаги 2-4** пока:
   - Не останется критичных замечаний, или
   - Пользователь не решит остановить цикл

**Приоритеты замечаний:**
- **P1 (Critical)** — исправить перед мержем, если согласен
- **P2 (Important)** — рекомендуется исправить
- **Suggestions** — на усмотрение

6. **Дождаться деплоя** (GitHub Action):
   ```bash
   # Использовать sleep для ожидания завершения деплоя
   sleep 300
   ```


**Пример цикла проверки:**
```bash
# 1. Создать PR
gh pr create --title "Fix payment bug" --body "Description"

# 2. Запустить проверку
gh pr comment 19 --body "@codex проверь"

# 3. Подождать 5 минут
sleep 300

# 4. Проверить комментарии
gh api repos/2030ai/2030aiwebsite/pulls/19/comments \
  --jq '.[] | select(.user.login | test("copilot|codex")) | "\(.user.login): \(.body[0:200])..."'

# 5. Если есть замечания — исправить, запушить, повторить шаг 2
git add . && git commit -m "fix: address review comments" && git push
gh pr comment 19 --body "@codex проверь"

# 6. Дождаться деплоя и проверить его успешность
sleep 300
